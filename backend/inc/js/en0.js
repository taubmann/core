// AUTO-CREATED FILE (created at 1356796121) do not edit!

/*
	Masked Input plugin for jQuery Copyright (c) 2007-2011 Josh Bush (digitalbush.com), Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license) 
	http://digitalbush.com/projects/masked-input-plugin/ Version: 1.3
*/
(function(a){var b=(a.browser.msie?"paste":"input")+".mask",c=window.orientation!=undefined;a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"},a.fn.extend({caret:function(a,b){if(this.length!=0){if(typeof a=="number"){b=typeof b=="number"?b:a;return this.each(function(){if(this.setSelectionRange)this.setSelectionRange(a,b);else if(this.createTextRange){var c=this.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select()}})}if(this[0].setSelectionRange)a=this[0].selectionStart,b=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var c=document.selection.createRange();a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length}return{begin:a,end:b}}},unmask:function(){return this.trigger("unmask")},mask:function(d,e){if(!d&&this.length>0){var f=a(this[0]);return f.data(a.mask.dataName)()}e=a.extend({placeholder:"_",completed:null},e);var g=a.mask.definitions,h=[],i=d.length,j=null,k=d.length;a.each(d.split(""),function(a,b){b=="?"?(k--,i=a):g[b]?(h.push(new RegExp(g[b])),j==null&&(j=h.length-1)):h.push(null)});return this.trigger("unmask").each(function(){function v(a){var b=f.val(),c=-1;for(var d=0,g=0;d<k;d++)if(h[d]){l[d]=e.placeholder;while(g++<b.length){var m=b.charAt(g-1);if(h[d].test(m)){l[d]=m,c=d;break}}if(g>b.length)break}else l[d]==b.charAt(g)&&d!=i&&(g++,c=d);if(!a&&c+1<i)f.val(""),t(0,k);else if(a||c+1>=i)u(),a||f.val(f.val().substring(0,c+1));return i?d:j}function u(){return f.val(l.join("")).val()}function t(a,b){for(var c=a;c<b&&c<k;c++)h[c]&&(l[c]=e.placeholder)}function s(a){var b=a.which,c=f.caret();if(a.ctrlKey||a.altKey||a.metaKey||b<32)return!0;if(b){c.end-c.begin!=0&&(t(c.begin,c.end),p(c.begin,c.end-1));var d=n(c.begin-1);if(d<k){var g=String.fromCharCode(b);if(h[d].test(g)){q(d),l[d]=g,u();var i=n(d);f.caret(i),e.completed&&i>=k&&e.completed.call(f)}}return!1}}function r(a){var b=a.which;if(b==8||b==46||c&&b==127){var d=f.caret(),e=d.begin,g=d.end;g-e==0&&(e=b!=46?o(e):g=n(e-1),g=b==46?n(g):g),t(e,g),p(e,g-1);return!1}if(b==27){f.val(m),f.caret(0,v());return!1}}function q(a){for(var b=a,c=e.placeholder;b<k;b++)if(h[b]){var d=n(b),f=l[b];l[b]=c;if(d<k&&h[d].test(f))c=f;else break}}function p(a,b){if(!(a<0)){for(var c=a,d=n(b);c<k;c++)if(h[c]){if(d<k&&h[c].test(l[d]))l[c]=l[d],l[d]=e.placeholder;else break;d=n(d)}u(),f.caret(Math.max(j,a))}}function o(a){while(--a>=0&&!h[a]);return a}function n(a){while(++a<=k&&!h[a]);return a}var f=a(this),l=a.map(d.split(""),function(a,b){if(a!="?")return g[a]?e.placeholder:a}),m=f.val();f.data(a.mask.dataName,function(){return a.map(l,function(a,b){return h[b]&&a!=e.placeholder?a:null}).join("")}),f.attr("readonly")||f.one("unmask",function(){f.unbind(".mask").removeData(a.mask.dataName)}).bind("focus.mask",function(){m=f.val();var b=v();u();var c=function(){b==d.length?f.caret(0,b):f.caret(b)};(a.browser.msie?c:function(){setTimeout(c,0)})()}).bind("blur.mask",function(){v(),f.val()!=m&&f.change()}).bind("keydown.mask",r).bind("keypress.mask",s).bind(b,function(){setTimeout(function(){f.caret(v(!0))},0)}),v()})}})})(jQuery)


/********************************************************************************
*  Copyright notice
*
*  (c) 2012 Christoph Taubmann (info@cms-kit.org)
*  All rights reserved
*
*  This script is part of cms-kit Framework. 
*  This is free software; you can redistribute it and/or modify
*  it under the terms of the GNU General Public License Version 3 as published by
*  the Free Software Foundation, or (at your option) any later version.
*
*  The GNU General Public License can be found at
*  http://www.gnu.org/licenses/gpl.html
*  A copy is found in the textfile GPL.txt and important notices to other licenses
*  can be found found in LICENSES.txt distributed with these scripts.
*
*  This script is distributed in the hope that it will be useful,
*  but WITHOUT ANY WARRANTY; without even the implied warranty of
*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
*  GNU General Public License for more details.
*
*  This copyright notice MUST APPEAR in all copies of the script!
* 
* 
*********************************************************************************/

function message(str, err, out){var id='x'+Math.random().toString().substring(2);var h='<div id="'+id+'" class="ui-widget"><div class="ui-state-'+(err?'error':'highlight')+' ui-corner-all" style="padding:0 .7em"><p><span class="ui-icon ui-icon-'+(err?'alert':'info')+'" style="float:left;margin-right:.3em;"></span>'+str+'</p></div></div>';$('#messagebox').append(h);window.setTimeout(function(){$('#'+id).slideUp()}, (out?out:3000));};function _ (str){if(window.LL && window.LL[str]) return window.LL[str];return str.replace(/_/g, ' ');};function getget(){var h=window.location.hash.substr(1),g=[];if(h.length>0){var p=h.split('&');for(var i=0,j=p.length;i<j;++i){var a=p[i].split('=');if(a[1]) g[a[0]]=a[1];}}return g;};(function($){$.fn.realPrev=function(selector, no){var all=$("*");if(!no) no=-1;return all.slice(0,all.index(this)).filter(selector).slice(no).first();}})(jQuery);function array_diff (a, b){return jQuery.grep(a, function(n,i){return b.indexOf(n) < 0;});};function template(str, data){ return str.replace(/%(\w*)%/g,function(m,key){return data.hasOwnProperty(key) ? data[key] :'';});};function showTT(el){alert($(el).next('span').html())};function transmitFilePath(p){$('#'+targetFieldId).val(p);message(p+' '+langLabels.saved);};function checkForNumber(el){el.style.color=(isNaN(el.value)) ? '#f00' :'#000';};$(window).unload(function(){window.name=JSON.stringify(store)});
var ch, actHash='', objectName='', objectId='', objectHType=false;function checkHash(){var h=window.location.hash.substr(1),g=[];if(h.length>0){var p=h.split('&');for(var i=0,j=p.length;i<j;++i){var a=p[i].split('=');if(a[1]) g[a[0]]=a[1];}}if(!g['object']){$('#colLeftb').html('')};if(g['object'] && g['object']!=objectName){init(g['object'], g['id'])};if(!g['id']){$('#colMidb').empty();$('#colRightb').empty();};if(g['id'] && g['id']!=objectId){getContent(g['id'])};if(g['connect_to_object'] && g['connect_to_id']){createContent();window.setTimeout(function(){$.post('crud.php?action=saveReferences&projectName='+projectName+'&objectName='+objectName+'&objectId='+objectId+'&referenceName='+g['connect_to_object'], {order:'l[]='+g['connect_to_id'] }, function(data){getContent(objectId)})}, 1000);};window.setTimeout(checkHash, 3000);};function selectObject(name){window.location.hash=actHash='object='+name;init(name);};function init(name, id){objectName=name;$('#colMidb').html('');$('#colRightb').html('');$('#objectSelect').val(name);if(!store[objectName]){store[objectName]={offset:0,srt:[],lbls:[]}}getList(id);};$(document).ready(function(){$.mask.definitions['~']='[+-]';$.mask.definitions['h']='[A-Fa-f0-9]';$('body').bind('ajaxSend', function(elm, xhr, s){if (s.type == "POST"||s.type == "GET"){xhr.setRequestHeader('X-CSRF-Token', '3')}});$('button').each(function(){ $(this).button({icons:{ primary:'ui-icon-'+$(this).attr('rel')}}); });function setColW(){var cw=[ parseInt($('#colLeft').css('width')), parseInt($('#colMid').css('width')), parseInt($('#colRight').css('width')) ];$('#colMid').css('left', (cw[0]+20)+'px');$('#colRight').css('left', (cw[0]+cw[1]+30)+'px');store['cw']=cw;};var dw=$(document).width(),w=Math.floor((dw-50)/4),cw=(store['cw']) ? store['cw'] :[w, w*2, w];ch=$(document).height()-70,limitNumber=Math.floor((ch-50)/32);$("#colLeft").resizable({stop:setColW});$("#colMid").resizable({stop:setColW});$("#colRight").resizable({stop:setColW});$("#colLeft").css({'width':cw[0],'height':ch});$("#colMid").css({'width':cw[1],'left':cw[0]+20,'height':ch});$("#colRight").css({'width':cw[2],'left':cw[0]+cw[1]+30,'height':ch});$("#colLeftb").height(ch-50);$("#colMidb").height(ch);$("#colRightb").height(ch-10);if(dw<850) $("#logo").hide();originalFontSize=$('html').css('font-size');if(store['fnts']){$('html').css('font-size', store['fnts']);}window.setTimeout(checkHash, 500);});function offSet(name, no){store[name]['offset'] += no;};function getPlainList(id){$.get('crud.php', {action:'getList', projectName:projectName, objectName:objectName, objectId:id, limit:limitNumber, offset:(store[objectName]['offset'] ? parseInt(store[objectName]['offset']) :0)}, function(data){if(id && !isNaN(data)){store[objectName]['offset']=parseInt(data);getPlainList();return;}$('#colLeftb').html(data);styleButtons('mainlistHead');$("#mainlist").selectable({stop:function(){var a=[];$('.ui-selected', this).each(function(){a.push(this.getAttribute('rel'))});if(a.length>1){specialAction('crud.php?action=multiSelect&projectName='+projectName+'&objectName='+objectName+'&objectId='+a.join(','), 'colMidb');}else{if(typeof a[0]!='undefined'){getContent(a[0])};}}});});};function specialAction(url, target, post){$.post(url, {val:post}, function(data){if(target){$('#'+target).html(data);$('#'+target+' #accordion').accordion({collapsible:true});$('#'+target+' #tabs').tabs();prettify(target);}else {message(data);}});};function getTreeList(id, treeType){if(!store[objectName]) store[objectName]={};if(!store[objectName]['stat']) store[objectName]['stat']=[];var params='&projectName='+projectName+'&objectName='+objectName+'&objectId='+id+'&tType='+treeType+'&limit='+limitNumber+'&offset=';if (id){$.get('crud.php?action=getTreePath'+params,function(data){store[objectName]['stat']=data.split(',');})}else{store[objectName]['stat']=[];};$.get('crud.php?action=getTreeHead'+params,function(data){$('#colLeftb').html(data);styleButtons('mainlistHead');$("#mainlist2").folderTree({script:'crud.php?action=getTreeList'+params,loadMessage:'load Data' + '...',statCheck:function(target){target.find('li>span').each(function(i){$(this).on('click', function(e){if($(e.target).data('id')) getContent($(e.target).data('id'));});var myd=$(this).data('id').toString();if($.inArray(myd, store[objectName]['stat']) > -1){$(this).parent().find(".ui-icon-circle-plus").trigger('click');}if(myd == id){$(this).addClass('sel');}})}})})};function showPagination(){if($('#pagination').html() != ''){$('#pagination').toggle();return;}$.get('crud.php', {action:'getPagination', projectName:projectName, objectName:objectName, limit:limitNumber, offset:parseInt(store[objectName]['offset'])},function(data){$('#pagination').html(data);});}function setPagination(n){store[objectName]['offset']=limitNumber*n;getList();}function getList(id){$('#searchbox').autocomplete({source:'inc/php/search.php?projectName='+projectName+'&objectName='+objectName,minLength:3,select:function(event,ui){ getContent(ui.item.id);return false;}});var ic=(objectId.length>0);var objectHType=$('#objectSelect option[value="'+objectName+'"]').data('htype');if(objectHType && objectHType!='List'){getTreeList(id, objectHType);if(id){setTimeout(function(){$('#mainlist2 .folder[rel="'+id+'"]').addClass('sel')}, 2000)}}else{getPlainList(id);if(id){setTimeout(function(){$('#mainlist li[rel="'+id+'"]').addClass('ui-selected')},1000)}}setTimeout(function(){$('#objectWizards').html($('#objectWizardHtml').html());}, 1000);};function getContent(id){if(id=='undefined'){return false;};window.location.hash=actHash='#object='+objectName+'&id='+id;objectId=id;$('#colMidb').empty();$('#colRightb').empty();$.get('crud.php', {action:'getContent', projectName:projectName, objectName:objectName, objectId:id }, function(data){$('#colMidb').html(data);$('#accordion').accordion({collapsible:true});$('#tabs').tabs();prettify('colMidb');$('#colMidb textarea').autosize();$('#colMidb input[data-mask]').each(function(){$(this).mask($(this).data('mask'))});$('#colMidb *[data-readonly]').each(function(){$(this).attr('readonly','readonly')});$('#colMidb input[data-type]').each(function(){var newEl=$(this).clone();newEl.attr("type", $(this).data('type'));newEl.insertBefore($(this));$(this).remove();});});getConnectedReferences(id);};function getConnectedReferences(id, off){if(!off) off=0;$.get('crud.php',{ action:'getConnectedReferences',projectName:projectName, objectName:objectName, objectId:id,limit:limitNumber, offset:off}, function(data){$('#colRightb').html(data);styleButtons('colRightb');$('#colRightb .lnk').click(function(e){objectName=$(this).data('object');getList();$('#objectSelect').val(objectName);getContent($(this).data('id'));e.preventDefault();});});};function saveContent(id){$('#colMidb .eframe').each(function(){var f=$(this), fd=f[0].contentWindow||f[0]; fd.transfer();});$.post('crud.php?action=saveContent&projectName='+projectName+'&objectName='+objectName+'&objectId='+id, $('#colMidb').serialize(), function(data){message(data);getList(id);});};function createContent(){$.get('crud.php', { action:'createContent', projectName:projectName, objectName:objectName}, function(data){$('#colRightb').html('');if(data.substr(0,1)=='_'){message(data.substr(1));return false;}else {objectId=data;window.location.hash='#object='+objectName+'&id='+data;getContent(data);message('entry created'+' (ID:'+data+')');}});};function deleteContent(id){var q=confirm('delete entry'+' (ID:'+id+')?');if(q){$.get('crud.php', {action:'deleteContent', projectName:projectName, objectName:objectName, objectId:id}, function(data){message(data);window.location.hash='object='+objectName;location.reload();});}};function getReferences (id, offs1, offs2){var referenceName=$('#referenceSelect>option:selected').val();if(referenceName){$.get('crud.php', {action:'getReferences', projectName:projectName, objectName:objectName, objectId:id, referenceName:referenceName, limit:limitNumber, offset:offs1,offset2:offs2}, function(data){$('#colRightb').html(data);styleButtons('colRightb');$('#sublist, #sublist2').sortable({items:'li:not(.ui-state-disabled)',connectWith:'.rlist',placeholder:'ui-state-highlight',handle:'span'});$('.sublistParent').bind('sortreceive', function(event, ui){if ($(this).children().length > 2){$(ui.sender).sortable('cancel');message('action cancelled, because only one connection allowed', true, 5000);return;};});function saveReference(){$.post('crud.php?action=saveReferences&projectName='+projectName+'&objectName='+objectName+'&objectId='+id+'&referenceName='+referenceName, {order:$('#sublist').sortable('serialize', 'id')}, function(data){message(data);});};$("#sublist").bind("sortupdate", function(event, ui){saveReference();});$('#referenceSearchbox').autocomplete({source:'inc/php/search.php?projectName='+projectName+'&objectName='+referenceName,select:function(event, ui){ var lnk='location=\'backend.php?project='+projectName+'&object='+referenceName+'#'+ui.item.id+'\'';var htm='<h4>'+'what do you want to do?'+'</h4>';htm += '<button type="button" onclick="'+lnk+'">'+'show this entry'+'</button> ';if($('#sublist').find('#l_'+ui.item.id).length==0 && $('.sublistParent').children().length<2){htm += '<button type="button" id="insertListItem">'+'add this entry to the connection-list'+'</button>';};$("#dialogb1").html(htm);$("#dialogb1 button").button();$("#dialog1").dialog();$('#insertListItem').click(function(){$('#sublist').html($('#sublist').html() + '<li id="l_'+ui.item.id+'" class="ui-state-default ui-selectee"><div onclick="'+lnk+'">'+ui.item.label+'</div></li>');$(this).hide();saveReference();});return false;},minLength:3});$('#colRightb .lnk').click(function(e){objectName=$(this).data('object');getList();$('#objectSelect').val(objectName);getContent($(this).data('id'));e.preventDefault();});});} else{getConnectedReferences(id);}};function prettify(id){styleButtons(id);$('#'+id+' .date').datepicker({dateFormat:'yy-mm-dd'});$('#'+id+' .datetime').datetimepicker({dateFormat:'yy-mm-dd',timeFormat:'h:m:s',showSecond:true});$('#'+id+' .timestamp').datetimepicker({dateFormat:'mm dd yy',timeFormat:'h:m:s',showSecond:true, beforeShow:function(input, inst){var ts=parseInt($(input).val()),d=new Date((ts>0) ? ts*1000 :new Date().getTime()),str=(d.getMonth()+1)+' '+d.getDate()+' '+d.getFullYear()+' '+d.getHours()+':'+d.getMinutes()+':'+d.getSeconds();$(input).val(str);},onClose:function(dateText, inst){var dat=Math.floor(Date.parse(dateText)/1000);if(!isNaN(dat)) $(this).val(dat);}});$('#'+id+' .slider').each(function(){var rl=$(this).attr('rel').split('-');$(this).slider({range:'min',value:parseInt($(this).attr('alt')),min:parseInt(rl[0]),max:parseInt(rl[1]),slide:function(event, ui){$('#input_' + $(this).attr('title')).val(ui.value);}});});$('#'+id+' .checkbox').button({icons:{primary:'ui-icon-circle-close'},text:false }).click(function (){$(this).button('option', 'icons', {primary:this.checked ? 'ui-icon-circle-check':'ui-icon-circle-close'})}).filter(":checked").button({icons:{primary:"ui-icon-circle-check"}});};function styleButtons(id){ $('#'+id+' button').each(function(){$(this).button({icons:{primary:'ui-icon-'+$(this).attr('rel')}, text:(($(this).text()=='.')?false:true),title:''})})};function logout(){store['lastPage']=window.location.hash.substr(1);if(userId != 0){$.post('extensions/user/wizards/settings/save.php?projectName='+projectName, { id:userId, json:JSON.stringify(store) }, function(d){window.location='index.php?project='+projectName;});}else{window.location='index.php?project='+projectName;}};function getFrame(url, el){var wh=(store['dwh']) ? store['dwh'] :[($(document).width()*90/100), ($(document).height()*90/100)];$("#dialogb2").css({'width':wh[0]-20, 'height':wh[1]-70});$("#dialogb2").attr('src', url);$("#dialog2").dialog({ width:wh[0],height:wh[1], modal:true,show:"scale",hide:"scale",close:function(event,ui){ $("#dialogb2").attr('src','about:blank');},resizeStop:function(event, ui){store['dwh']=[$(this).dialog('option','width'), $(this).dialog('option','height')];}})};function openGlobalWizard(el){var url=el.value;if(url!=''){getFrame(template(url, window),el);$('#globalWizard').val('');}};function getWizard(id, type, add){if(type.substr(0,1)=='#') type=$(type).val();targetFieldId=id;getFrame('wizards/' + type + '/index.php?projectName='+projectName+'&objectName='+objectName+'&objectId='+objectId+((add)?'&'+add:''));};(function(){var old=$.ui.dialog.prototype._create;$.ui.dialog.prototype._create=function(d){old.call(this, d);var self=this,options=self.options,oldHeight=options.height,oldWidth=options.width,uiDialogTitlebarFull=$('<a class="ui-dialog-titlebar-full ui-corner-all" href="#"><span class="ui-icon ui-icon-newwin"></span></a>').attr('role', 'button').hover(function(){uiDialogTitlebarFull.addClass('ui-state-hover');},function(){uiDialogTitlebarFull.removeClass('ui-state-hover');}).toggle(function(){self._setOptions({height :window.innerHeight - 10,width :window.innerWidth - 30});$("#dialogb2").css({'width':window.innerWidth-50,'height':window.innerHeight-80});self._position('center');return false;},function(){self._setOptions({height :oldHeight,width :oldWidth});$("#dialogb2").css({'width':oldWidth-20,'height':oldHeight-70});self._position('center');return false;}).focus(function(){uiDialogTitlebarFull.addClass('ui-state-focus');}).blur(function(){uiDialogTitlebarFull.removeClass('ui-state-focus');}).appendTo(self.uiDialogTitlebar)};})();$(window).keypress(function(event){if (!(event.which == 115 && event.ctrlKey) && !(event.which == 19)) return true;var id=$('#saveButton').attr('alt');if(id) saveContent(id);event.preventDefault();return false;});

 /*
 * jQuery UI Selectmenu version 1.4.0pre
 *
 * Copyright (c) 2009-2010 filament group, http://filamentgroup.com
 * Copyright (c) 2010-2012 Felix Nagel, http://www.felixnagel.com
 * Licensed under the MIT (MIT-LICENSE.txt)
 *
 * https://github.com/fnagel/jquery-ui/wiki/Selectmenu
 */

 (function($){$.widget("ui.selectmenu", {options:{appendTo:"body",typeAhead:1000,style:'dropdown',positionOptions:null,width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null,escapeHtml:false,bgImage:function(){}},_create:function(){var self=this, o=this.options;var selectmenuId=this.element.uniqueId().attr("id");this.ids=[ selectmenuId, selectmenuId + '-button', selectmenuId + '-menu' ];this._safemouseup=true;this.isOpen=false;this.newelement=$('<a />', {'class':'ui-selectmenu ui-widget ui-state-default ui-corner-all','id' :this.ids[ 1 ],'role':'button','href':'#nogo','tabindex':this.element.attr('disabled') ? 1 :0,'aria-haspopup':true,'aria-owns':this.ids[ 2 ]});this.newelementWrap=$("<span />").append(this.newelement).insertAfter(this.element);var tabindex=this.element.attr('tabindex');if (tabindex){this.newelement.attr('tabindex', tabindex);}this.newelement.data('selectelement', this.element);this.selectmenuIcon=$('<span class="ui-selectmenu-icon ui-icon"></span>').prependTo(this.newelement);this.newelement.prepend('<span class="ui-selectmenu-status" />');this.element.bind({'click.selectmenu':function(event){self.newelement.focus();event.preventDefault();}});this.newelement.bind('mousedown.selectmenu', function(event){self._toggle(event, true);if (o.style == "popup"){self._safemouseup=false;setTimeout(function(){ self._safemouseup=true; }, 300);}event.preventDefault();}).bind('click.selectmenu', function(event){event.preventDefault();}).bind("keydown.selectmenu", function(event){var ret=false;switch (event.keyCode){case $.ui.keyCode.ENTER:ret=true;break;case $.ui.keyCode.SPACE:self._toggle(event);break;case $.ui.keyCode.UP:if (event.altKey){self.open(event);} else {self._moveSelection(-1);}break;case $.ui.keyCode.DOWN:if (event.altKey){self.open(event);} else {self._moveSelection(1);}break;case $.ui.keyCode.LEFT:self._moveSelection(-1);break;case $.ui.keyCode.RIGHT:self._moveSelection(1);break;case $.ui.keyCode.TAB:ret=true;break;case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.HOME:self.index(0);break;case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.END:self.index(self._optionLis.length);break;default:ret=true;}return ret;}).bind('keypress.selectmenu', function(event){if (event.which > 0){self._typeAhead(event.which, 'mouseup');}return true;}).bind('mouseover.selectmenu', function(){if (!o.disabled) $(this).addClass('ui-state-hover');}).bind('mouseout.selectmenu', function(){if (!o.disabled) $(this).removeClass('ui-state-hover');}).bind('focus.selectmenu', function(){if (!o.disabled) $(this).addClass('ui-state-focus');}).bind('blur.selectmenu', function(){if (!o.disabled) $(this).removeClass('ui-state-focus');});$(document).bind("mousedown.selectmenu-" + this.ids[ 0 ], function(event){if (self.isOpen && self.ids[ 1 ] != event.target.offsetParent.id){self.close(event);}});this.element.bind("click.selectmenu", function(){self._refreshValue();}).bind("focus.selectmenu", function(){if (self.newelement){self.newelement[ 0 ].focus();}});if (!o.width){o.width=this.element.outerWidth();}this.newelement.width(o.width);this.element.hide();this.list=$('<ul />', {'class':'ui-widget ui-widget-content','aria-hidden':true,'role':'listbox','aria-labelledby':this.ids[ 1 ],'id':this.ids[ 2 ]});this.listWrap=$("<div />", {'class':'ui-selectmenu-menu'}).append(this.list).appendTo(o.appendTo);this.list.bind("keydown.selectmenu", function(event){var ret=false;switch (event.keyCode){case $.ui.keyCode.UP:if (event.altKey){self.close(event, true);} else {self._moveFocus(-1);}break;case $.ui.keyCode.DOWN:if (event.altKey){self.close(event, true);} else {self._moveFocus(1);}break;case $.ui.keyCode.LEFT:self._moveFocus(-1);break;case $.ui.keyCode.RIGHT:self._moveFocus(1);break;case $.ui.keyCode.HOME:self._moveFocus(':first');break;case $.ui.keyCode.PAGE_UP:self._scrollPage('up');break;case $.ui.keyCode.PAGE_DOWN:self._scrollPage('down');break;case $.ui.keyCode.END:self._moveFocus(':last');break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:self.close(event, true);$(event.target).parents('li:eq(0)').trigger('mouseup');break;case $.ui.keyCode.TAB:ret=true;self.close(event, true);$(event.target).parents('li:eq(0)').trigger('mouseup');break;case $.ui.keyCode.ESCAPE:self.close(event, true);break;default:ret=true;}return ret;}).bind('keypress.selectmenu', function(event){if (event.which > 0){self._typeAhead(event.which, 'focus');}return true;}).bind('mousedown.selectmenu mouseup.selectmenu', function(){ return false; });$(window).bind("resize.selectmenu-" + this.ids[ 0 ], $.proxy(self.close, this));},_init:function(){var self=this, o=this.options;var selectOptionData=[];this.element.find('option').each(function(){var opt=$(this);selectOptionData.push({value:opt.attr('value'),text:self._formatText(opt.text(), opt),selected:opt.attr('selected'),disabled:opt.attr('disabled'),classes:opt.attr('class'),typeahead:opt.attr('typeahead'),parentOptGroup:opt.parent('optgroup'),bgImage:o.bgImage.call(opt)});});var activeClass=(self.options.style == "popup") ? " ui-state-active" :"";this.list.html("");if (selectOptionData.length){for (var i=0; i < selectOptionData.length; i++){var thisLiAttr={ role :'presentation' };if (selectOptionData[ i ].disabled){thisLiAttr[ 'class' ]='ui-state-disabled';}var thisAAttr={html:selectOptionData[ i ].text || '&nbsp;',href:'#nogo',tabindex :-1,role:'option','aria-selected' :false};if (selectOptionData[ i ].disabled){thisAAttr[ 'aria-disabled' ]=selectOptionData[ i ].disabled;}if (selectOptionData[ i ].typeahead){thisAAttr[ 'typeahead' ]=selectOptionData[ i ].typeahead;}var thisA=$('<a/>', thisAAttr).bind('focus.selectmenu', function(){$(this).parent().mouseover();}).bind('blur.selectmenu', function(){$(this).parent().mouseout();});var thisLi=$('<li/>', thisLiAttr).append(thisA).data('index', i).addClass(selectOptionData[ i ].classes).data('optionClasses', selectOptionData[ i ].classes || '').bind("mouseup.selectmenu", function(event){if (self._safemouseup && !self._disabled(event.currentTarget) && !self._disabled($(event.currentTarget).parents("ul > li.ui-selectmenu-group "))){self.index($(this).data('index'));self.select(event);self.close(event, true);}return false;}).bind("click.selectmenu", function(){return false;}).bind('mouseover.selectmenu', function(e){if (!$(this).hasClass('ui-state-disabled') && !$(this).parent("ul").parent("li").hasClass('ui-state-disabled')){e.optionValue=self.element[ 0 ].options[ $(this).data('index') ].value;self._trigger("hover", e, self._uiHash());self._selectedOptionLi().addClass(activeClass);self._focusedOptionLi().removeClass('ui-selectmenu-item-focus ui-state-hover');$(this).removeClass('ui-state-active').addClass('ui-selectmenu-item-focus ui-state-hover');}}).bind('mouseout.selectmenu', function(e){if ($(this).is(self._selectedOptionLi())){$(this).addClass(activeClass);}e.optionValue=self.element[ 0 ].options[ $(this).data('index') ].value;self._trigger("blur", e, self._uiHash());$(this).removeClass('ui-selectmenu-item-focus ui-state-hover');});if (selectOptionData[ i ].parentOptGroup.length){var optGroupName='ui-selectmenu-group-' + this.element.find('optgroup').index(selectOptionData[ i ].parentOptGroup);if (this.list.find('li.' + optGroupName).length){this.list.find('li.' + optGroupName + ':last ul').append(thisLi);} else {$('<li role="presentation" class="ui-selectmenu-group ' + optGroupName + (selectOptionData[ i ].parentOptGroup.attr("disabled") ? ' ' + 'ui-state-disabled" aria-disabled="true"' :'"') + '><span class="ui-selectmenu-group-label">' + selectOptionData[ i ].parentOptGroup.attr('label') + '</span><ul></ul></li>').appendTo(this.list).find('ul').append(thisLi);}} else {thisLi.appendTo(this.list);}if (o.icons){for (var j in o.icons){if (thisLi.is(o.icons[ j ].find)){thisLi.data('optionClasses', selectOptionData[ i ].classes + ' ui-selectmenu-hasIcon').addClass('ui-selectmenu-hasIcon');var iconClass=o.icons[ j ].icon || "";thisLi.find('a:eq(0)').prepend('<span class="ui-selectmenu-item-icon ui-icon ' + iconClass + '"></span>');if (selectOptionData[ i ].bgImage){thisLi.find('span').css('background-image', selectOptionData[ i ].bgImage);}}}}}} else {$(' <li role="presentation"><a href="#nogo" tabindex="-1" role="option"></a></li>').appendTo(this.list);}var isDropDown=(o.style == 'dropdown');this.newelement.toggleClass('ui-selectmenu-dropdown', isDropDown).toggleClass('ui-selectmenu-popup', !isDropDown);this.list.toggleClass('ui-selectmenu-menu-dropdown ui-corner-bottom', isDropDown).toggleClass('ui-selectmenu-menu-popup ui-corner-all', !isDropDown).find('li:first').toggleClass('ui-corner-top', !isDropDown).end().find('li:last').addClass('ui-corner-bottom');this.selectmenuIcon.toggleClass('ui-icon-triangle-1-s', isDropDown).toggleClass('ui-icon-triangle-2-n-s', !isDropDown);if (o.style == 'dropdown'){this.list.width(o.menuWidth ? o.menuWidth :o.width);} else {this.list.width(o.menuWidth ? o.menuWidth :o.width - o.handleWidth);}this.list.css('height', 'auto');var listH=this.listWrap.height();var winH=$(window).height();var maxH=o.maxHeight ? Math.min(o.maxHeight, winH) :winH / 3;if (listH > maxH) this.list.height(maxH);this._optionLis=this.list.find('li:not(.ui-selectmenu-group)');if (this.element.attr('disabled')){this.disable();} else {this.enable();}this._refreshValue();this._selectedOptionLi().addClass('ui-selectmenu-item-focus');clearTimeout(this.refreshTimeout);this.refreshTimeout=window.setTimeout(function (){self._refreshPosition();}, 200);},destroy:function(){this.element.removeData(this.widgetName).removeClass('ui-selectmenu-disabled' + ' ' + 'ui-state-disabled').removeAttr('aria-disabled').unbind(".selectmenu");$(window).unbind(".selectmenu-" + this.ids[ 0 ]);$(document).unbind(".selectmenu-" + this.ids[ 0 ]);this.newelementWrap.remove();this.listWrap.remove();this.element.unbind(".selectmenu").show();$.Widget.prototype.destroy.apply(this, arguments);},_typeAhead:function(code, eventType){var self=this,c=String.fromCharCode(code).toLowerCase(),matchee=null,nextIndex=null;if (self._typeAhead_timer){window.clearTimeout(self._typeAhead_timer);self._typeAhead_timer=undefined;}self._typeAhead_chars=(self._typeAhead_chars === undefined ? "" :self._typeAhead_chars).concat(c);if (self._typeAhead_chars.length < 2 || (self._typeAhead_chars.substr(-2, 1) === c && self._typeAhead_cycling)){self._typeAhead_cycling=true;matchee=c;} else {self._typeAhead_cycling=false;matchee=self._typeAhead_chars;}var selectedIndex=(eventType !== 'focus' ? this._selectedOptionLi().data('index') :this._focusedOptionLi().data('index')) || 0;for (var i=0; i < this._optionLis.length; i++){var thisText=this._optionLis.eq(i).text().substr(0, matchee.length).toLowerCase();if (thisText === matchee){if (self._typeAhead_cycling){if (nextIndex === null)nextIndex=i;if (i > selectedIndex){nextIndex=i;break;}} else {nextIndex=i;}}}if (nextIndex !== null){this._optionLis.eq(nextIndex).find("a").trigger(eventType);}self._typeAhead_timer=window.setTimeout(function(){self._typeAhead_timer=undefined;self._typeAhead_chars=undefined;self._typeAhead_cycling=undefined;}, self.options.typeAhead);},_uiHash:function(){var index=this.index();return {index:index,option:$("option", this.element).get(index),value:this.element[ 0 ].value};},open:function(event){if (this.newelement.attr("aria-disabled") != 'true'){var self=this,o=this.options,selected=this._selectedOptionLi(),link=selected.find("a");self._closeOthers(event);self.newelement.addClass('ui-state-active');self.list.attr('aria-hidden', false);self.listWrap.addClass('ui-selectmenu-open');if (o.style == "dropdown"){self.newelement.removeClass('ui-corner-all').addClass('ui-corner-top');} else {this.list.css("left", -5000).scrollTop(this.list.scrollTop() + selected.position().top - this.list.outerHeight() / 2 + selected.outerHeight() / 2).css("left", "auto");}self._refreshPosition();if (link.length){link[ 0 ].focus();}self.isOpen=true;self._trigger("open", event, self._uiHash());}},close:function(event, retainFocus){if (this.newelement.is('.ui-state-active')){this.newelement.removeClass('ui-state-active');this.listWrap.removeClass('ui-selectmenu-open');this.list.attr('aria-hidden', true);if (this.options.style == "dropdown"){this.newelement.removeClass('ui-corner-top').addClass('ui-corner-all');}if (retainFocus){this.newelement.focus();}this.isOpen=false;this._trigger("close", event, this._uiHash());}},change:function(event){this.element.trigger("change");this._trigger("change", event, this._uiHash());},select:function(event){if (this._disabled(event.currentTarget)){ return false; }this._trigger("select", event, this._uiHash());},widget:function(){return this.listWrap.add(this.newelementWrap);},_closeOthers:function(event){$('.ui-selectmenu.ui-state-active').not(this.newelement).each(function(){$(this).data('selectelement').selectmenu('close', event);});$('.ui-selectmenu.ui-state-hover').trigger('mouseout');},_toggle:function(event, retainFocus){if (this.isOpen){this.close(event, retainFocus);} else {this.open(event);}},_formatText:function(text, opt){if (this.options.format){text=this.options.format(text, opt);} else if (this.options.escapeHtml){text=$('<div />').text(text).html();}return text;},_selectedIndex:function(){return this.element[ 0 ].selectedIndex;},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex());},_focusedOptionLi:function(){return this.list.find('.ui-selectmenu-item-focus');},_moveSelection:function(amt, recIndex){if (!this.options.disabled){var currIndex=parseInt(this._selectedOptionLi().data('index') || 0, 10);var newIndex=currIndex + amt;if (newIndex < 0){newIndex=0;}if (newIndex > this._optionLis.size() - 1){newIndex=this._optionLis.size() - 1;}if (newIndex === recIndex){return false;}if (this._optionLis.eq(newIndex).hasClass('ui-state-disabled')){(amt > 0) ? ++amt :--amt;this._moveSelection(amt, newIndex);} else {this._optionLis.eq(newIndex).trigger('mouseover').trigger('mouseup');}}},_moveFocus:function(amt, recIndex){if (!isNaN(amt)){var currIndex=parseInt(this._focusedOptionLi().data('index') || 0, 10);var newIndex=currIndex + amt;} else {var newIndex=parseInt(this._optionLis.filter(amt).data('index'), 10);}if (newIndex < 0){newIndex=0;}if (newIndex > this._optionLis.size() - 1){newIndex=this._optionLis.size() - 1;}if (newIndex === recIndex){return false;}var activeID='ui-selectmenu-item-' + Math.round(Math.random() * 1000);this._focusedOptionLi().find('a:eq(0)').attr('id', '');if (this._optionLis.eq(newIndex).hasClass('ui-state-disabled')){(amt > 0) ? ++amt :--amt;this._moveFocus(amt, newIndex);} else {this._optionLis.eq(newIndex).find('a:eq(0)').attr('id',activeID).focus();}this.list.attr('aria-activedescendant', activeID);},_scrollPage:function(direction){var numPerPage=Math.floor(this.list.outerHeight() / this._optionLis.first().outerHeight());numPerPage=(direction == 'up' ? -numPerPage :numPerPage);this._moveFocus(numPerPage);},_setOption:function(key, value){this.options[ key ]=value;if (key == 'disabled'){if (value) this.close();this.element.add(this.newelement).add(this.list)[ value ? 'addClass' :'removeClass' ]('ui-selectmenu-disabled ' + 'ui-state-disabled').attr("aria-disabled" , value);}},disable:function(index, type){if (typeof(index) == 'undefined'){this._setOption('disabled', true);} else {if (type == "optgroup"){this._toggleOptgroup(index, false);} else {this._toggleOption(index, false);}}},enable:function(index, type){if (typeof(index) == 'undefined'){this._setOption('disabled', false);} else {if (type == "optgroup"){this._toggleOptgroup(index, true);} else {this._toggleOption(index, true);}}},_disabled:function(elem){return $(elem).hasClass('ui-state-disabled');},_toggleOption:function(index, flag){var optionElem=this._optionLis.eq(index);if (optionElem){optionElem.toggleClass('ui-state-disabled', flag).find("a").attr("aria-disabled", !flag);if (flag){this.element.find("option").eq(index).attr("disabled", "disabled");} else {this.element.find("option").eq(index).removeAttr("disabled");}}},_toggleOptgroup:function(index, flag){var optGroupElem=this.list.find('li.ui-selectmenu-group-' + index);if (optGroupElem){optGroupElem.toggleClass('ui-state-disabled', flag).attr("aria-disabled", !flag);if (flag){this.element.find("optgroup").eq(index).attr("disabled", "disabled");} else {this.element.find("optgroup").eq(index).removeAttr("disabled");}}},index:function(newIndex){if (arguments.length){if (!this._disabled($(this._optionLis[ newIndex ])) && newIndex != this._selectedIndex()){this.element[ 0 ].selectedIndex=newIndex;this._refreshValue();this.change();} else {return false;}} else {return this._selectedIndex();}},value:function(newValue){if (arguments.length && newValue != this.element[ 0 ].value){this.element[ 0 ].value=newValue;this._refreshValue();this.change();} else {return this.element[ 0 ].value;}},_refreshValue:function(){var activeClass=(this.options.style == "popup") ? " ui-state-active" :"";var activeID='ui-selectmenu-item-' + Math.round(Math.random() * 1000);this.list.find('.ui-selectmenu-item-selected').removeClass("ui-selectmenu-item-selected" + activeClass).find('a').attr('aria-selected', 'false').attr('id', '');this._selectedOptionLi().addClass("ui-selectmenu-item-selected" + activeClass).find('a').attr('aria-selected', 'true').attr('id', activeID);var currentOptionClasses=(this.newelement.data('optionClasses') ? this.newelement.data('optionClasses') :"");var newOptionClasses=(this._selectedOptionLi().data('optionClasses') ? this._selectedOptionLi().data('optionClasses') :"");this.newelement.removeClass(currentOptionClasses).data('optionClasses', newOptionClasses).addClass(newOptionClasses).find('.ui-selectmenu-status').html(this._selectedOptionLi().find('a:eq(0)').html());this.list.attr('aria-activedescendant', activeID);},_refreshPosition:function(){var o=this.options,positionDefault={of:this.newelement,my:"left top",at:"left bottom",collision:'flip'};if (o.style == "popup"){var selected=this._selectedOptionLi();positionDefault.my="left top" + (this.list.offset().top - selected.offset().top - (this.newelement.outerHeight() + selected.outerHeight()) / 2);positionDefault.collision="fit";}this.listWrap.removeAttr('style').zIndex(this.element.zIndex() + 1001).position($.extend(positionDefault, o.positionOptions));}});})(jQuery);
// Autosize 1.9 - jQuery plugin for textareas
// (c) 2011 Jack Moore - jacklmoore.com
// license: www.opensource.org/licenses/mit-license.php
(function(e,t){var n="hidden",r="border-box",i='<textarea style="position:absolute; top:-9999px; left:-9999px; right:auto; bottom:auto; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden">',s=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],o="oninput",u="onpropertychange",a=e(i)[0];a.setAttribute(o,"return"),e.isFunction(a[o])||u in a?e.fn.autosize=function(t){return this.each(function(){function g(){var e,t;p||(p=!0,l.value=a.value,l.style.overflowY=a.style.overflowY,l.style.width=f.css("width"),l.scrollTop=0,l.scrollTop=9e4,e=l.scrollTop,t=n,e>h?(e=h,t="scroll"):e<c&&(e=c),a.style.overflowY=t,a.style.height=e+m+"px",setTimeout(function(){p=!1},1))}var a=this,f=e(a),l,c=f.height(),h=parseInt(f.css("maxHeight"),10),p,d=s.length,v,m=0;if(f.css("box-sizing")===r||f.css("-moz-box-sizing")===r||f.css("-webkit-box-sizing")===r)m=f.outerHeight()-f.height();if(f.data("mirror")||f.data("ismirror"))return;l=e(i).data("ismirror",!0).addClass(t||"autosizejs")[0],v=f.css("resize")==="none"?"none":"horizontal",f.data("mirror",e(l)).css({overflow:n,overflowY:n,wordWrap:"break-word",resize:v}),h=h&&h>0?h:9e4;while(d--)l.style[s[d]]=f.css(s[d]);e("body").append(l),u in a?o in a?a[o]=a.onkeyup=g:a[u]=g:a[o]=g,e(window).resize(g),f.bind("autosize",g),g()})}:e.fn.autosize=function(){return this}})(jQuery);

/* jQuery Folder Tree Plugin
 * Version 1.00 - released (28 September 2011) Giannis Koutsaftakis
 * <htmlab> (http://www.htmlab.gr) Visit http://www.htmlab.gr/blog for more information
 * 28 September 2011
 * TERMS OF USE
 * This plugin is dual-licensed under the GNU General Public License and the MIT License and
 * is copyright 2008 A Beautiful Site, LLC. 
 */

(function($){$.fn.folderTree=function(o){if(!o) var o={};if(o.root == undefined) o.root=0; if(o.script == undefined) o.script='';if(o.loadMessage == undefined) o.loadMessage='Loading...';if(o.statCheck == undefined) o.statCheck=function(id,stat){};return this.each(function(){function create_node (script, dir, target, fol){if($(fol).hasClass("sel")){$(fol).removeClass('folder').addClass('waitb');}else{$(fol).removeClass('folder').addClass('wait');}$.post(script, { id:dir }, function(data){$(fol).removeClass('wait waitb').addClass('folder');if(dir == o.root){ target.html(data);target.find("ul.jqueryFolderTree").show();}else{target.append(data);target.find("ul.jqueryFolderTree").css({'padding-left':'20px'}).show();}o.statCheck(target);});};$(this).on("click", ".ui-icon-circle-plus", function(e){$(this).removeClass("ui-icon-circle-plus").addClass("ui-icon-circle-minus");var cur_li=$(this).closest("li");var ul_to=cur_li.find("ul.jqueryFolderTree").first();if(ul_to.length > 0){ul_to.show();}else{create_node(o.script+'0', $(this).data('id'), cur_li, $(this).next('li span.folder'));}});$(this).on("click", ".foldoffset", function(e){var p=$(this).parent('ul');$.post(o.script+$(this).data('offset'), { id:$(this).data('pid') }, function(data){var p2=$(data.replace('display:none', 'padding-left:20px'));p.replaceWith(p2);o.statCheck(p2);});});$(this).on("click", ".ui-icon-circle-minus", function(e){$(this).removeClass("ui-icon-circle-minus").addClass("ui-icon-circle-plus");var cur_li=$(this).closest("li");var ul_to=cur_li.find("ul.jqueryFolderTree").first();ul_to.hide();});$(this).on("click", ".folder", function(e){$(".folder", $(this).attr('id')).removeClass('sel');$(this).addClass('sel');});$(this).html('<ul class="jqueryFolderTree"><li class="wait">' + o.loadMessage + '</li></ul>');create_node(o.script+'0', o.root, $(this));});}})(jQuery);

/*
* jQuery timepicker addon
* By: Trent Richardson [http://trentrichardson.com]
* Version 0.9.9
* Last Modified: 02/05/2012
* 
* Copyright 2012 Trent Richardson
* Dual licensed under the MIT and GPL licenses.
* http://trentrichardson.com/Impromptu/GPL-LICENSE.txt
* http://trentrichardson.com/Impromptu/MIT-LICENSE.txt
*/

(function($){$.extend($.ui, { timepicker:{ version:"0.9.9" } });function Timepicker(){this.regional=[]; this.regional['']={ currentText:'Now',closeText:'Done',ampm:false,amNames:['AM', 'A'],pmNames:['PM', 'P'],timeFormat:'hh:mm tt',timeSuffix:'',timeOnlyTitle:'choose time',timeText:'Time',hourText:'Hour',minuteText:'Minute',secondText:'Second',millisecText:'Millisecond',timezoneText:'Time-Zone'};this._defaults={ showButtonPanel:true,timeOnly:false,showHour:true,showMinute:true,showSecond:false,showMillisec:false,showTimezone:false,showTime:true,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,hour:0,minute:0,second:0,millisec:0,timezone:'+0000',hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,alwaysSetTime:true,separator:' ',altFieldTimeOnly:true,showTimepicker:true,timezoneIso8609:false,timezoneList:null,addSliderAccess:false,sliderAccessArgs:null};$.extend(this._defaults, this.regional['']);};$.extend(Timepicker.prototype, {$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,timezone:'+0000',hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,ampm:'',formattedDate:'',formattedTime:'',formattedDateTime:'',timezoneList:null,setDefaults:function(settings){extendRemove(this._defaults, settings || {});return this;},_newInst:function($input, o){var tp_inst=new Timepicker(),inlineSettings={};for (var attrName in this._defaults){var attrValue=$input.attr('time:' + attrName);if (attrValue){try {inlineSettings[attrName]=eval(attrValue);} catch (err){inlineSettings[attrName]=attrValue;}}}tp_inst._defaults=$.extend({}, this._defaults, inlineSettings, o, {beforeShow:function(input, dp_inst){if ($.isFunction(o.beforeShow))return o.beforeShow(input, dp_inst, tp_inst);},onChangeMonthYear:function(year, month, dp_inst){tp_inst._updateDateTime(dp_inst);if ($.isFunction(o.onChangeMonthYear))o.onChangeMonthYear.call($input[0], year, month, dp_inst, tp_inst);},onClose:function(dateText, dp_inst){if (tp_inst.timeDefined === true && $input.val() != '')tp_inst._updateDateTime(dp_inst);if ($.isFunction(o.onClose))o.onClose.call($input[0], dateText, dp_inst, tp_inst);},timepicker:tp_inst });tp_inst.amNames=$.map(tp_inst._defaults.amNames, function(val){ return val.toUpperCase() });tp_inst.pmNames=$.map(tp_inst._defaults.pmNames, function(val){ return val.toUpperCase() });if (tp_inst._defaults.timezoneList === null){var timezoneList=[];for (var i=-11; i <= 12; i++)timezoneList.push((i >= 0 ? '+' :'-') + ('0' + Math.abs(i).toString()).slice(-2) + '00');if (tp_inst._defaults.timezoneIso8609)timezoneList=$.map(timezoneList, function(val){return val == '+0000' ? 'Z' :(val.substring(0, 3) + ':' + val.substring(3));});tp_inst._defaults.timezoneList=timezoneList;}tp_inst.hour=tp_inst._defaults.hour;tp_inst.minute=tp_inst._defaults.minute;tp_inst.second=tp_inst._defaults.second;tp_inst.millisec=tp_inst._defaults.millisec;tp_inst.ampm='';tp_inst.$input=$input;if (o.altField)tp_inst.$altInput=$(o.altField).css({ cursor:'pointer' }).focus(function(){ $input.trigger("focus"); });if(tp_inst._defaults.minDate==0 || tp_inst._defaults.minDateTime==0){tp_inst._defaults.minDate=new Date();}if(tp_inst._defaults.maxDate==0 || tp_inst._defaults.maxDateTime==0){tp_inst._defaults.maxDate=new Date();}if(tp_inst._defaults.minDate !== undefined && tp_inst._defaults.minDate instanceof Date)tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime());if(tp_inst._defaults.minDateTime !== undefined && tp_inst._defaults.minDateTime instanceof Date)tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime());if(tp_inst._defaults.maxDate !== undefined && tp_inst._defaults.maxDate instanceof Date)tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime());if(tp_inst._defaults.maxDateTime !== undefined && tp_inst._defaults.maxDateTime instanceof Date)tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime());return tp_inst;},_addTimePicker:function(dp_inst){var currDT=(this.$altInput && this._defaults.altFieldTimeOnly) ?this.$input.val() + ' ' + this.$altInput.val() :this.$input.val();this.timeDefined=this._parseTime(currDT);this._limitMinMaxDateTime(dp_inst, false);this._injectTimePicker();},_parseTime:function(timeString, withDate){var regstr=this._defaults.timeFormat.toString().replace(/h{1,2}/ig, '(\\d?\\d)').replace(/m{1,2}/ig, '(\\d?\\d)').replace(/s{1,2}/ig, '(\\d?\\d)').replace(/l{1}/ig, '(\\d?\\d?\\d)').replace(/t{1,2}/ig, this._getPatternAmpm()).replace(/z{1}/ig, '(z|[-+]\\d\\d:?\\d\\d)?').replace(/\s/g, '\\s?') + this._defaults.timeSuffix + '$',order=this._getFormatPositions(),ampm='',treg;if (!this.inst) this.inst=$.datepicker._getInst(this.$input[0]);if (withDate || !this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst, 'dateFormat');var specials=new RegExp("[.*+?|()\\[\\]{}\\\\]", "g");regstr='^.{' + dp_dateFormat.length + ',}?' + this._defaults.separator.replace(specials, "\\$&") + regstr;}treg=timeString.match(new RegExp(regstr, 'i'));if (treg){if (order.t !== -1){if (treg[order.t] === undefined || treg[order.t].length === 0){ampm='';this.ampm='';} else {ampm=$.inArray(treg[order.t].toUpperCase(), this.amNames) !== -1 ? 'AM' :'PM';this.ampm=this._defaults[ampm == 'AM' ? 'amNames' :'pmNames'][0];}}if (order.h !== -1){if (ampm == 'AM' && treg[order.h] == '12')this.hour=0; else if (ampm == 'PM' && treg[order.h] != '12')this.hour=(parseFloat(treg[order.h]) + 12).toFixed(0); else this.hour=Number(treg[order.h]);}if (order.m !== -1) this.minute=Number(treg[order.m]);if (order.s !== -1) this.second=Number(treg[order.s]);if (order.l !== -1) this.millisec=Number(treg[order.l]);if (order.z !== -1 && treg[order.z] !== undefined){var tz=treg[order.z].toUpperCase();switch (tz.length){case 1:tz=this._defaults.timezoneIso8609 ? 'Z' :'+0000';break;case 5:if (this._defaults.timezoneIso8609)tz=tz.substring(1) == '0000' ? 'Z' :tz.substring(0, 3) + ':' + tz.substring(3);break;case 6:if (!this._defaults.timezoneIso8609)tz=tz == 'Z' || tz.substring(1) == '00:00' ? '+0000' :tz.replace(/:/, '');else if (tz.substring(1) == '00:00')tz='Z';break;}this.timezone=tz;}return true;}return false;},_getPatternAmpm:function(){var markers=[];o=this._defaults;if (o.amNames)$.merge(markers, o.amNames);if (o.pmNames)$.merge(markers, o.pmNames);markers=$.map(markers, function(val){ return val.replace(/[.*+?|()\[\]{}\\]/g, '\\$&') });return '(' + markers.join('|') + ')?';},_getFormatPositions:function(){var finds=this._defaults.timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|t{1,2}|z)/g),orders={ h:-1, m:-1, s:-1, l:-1, t:-1, z:-1 };if (finds)for (var i=0; i < finds.length; i++)if (orders[finds[i].toString().charAt(0)] == -1)orders[finds[i].toString().charAt(0)]=i + 1;return orders;},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this._defaults,tp_inst=this,hourMax=parseInt((o.hourMax - ((o.hourMax - o.hourMin) % o.stepHour)) ,10),minMax=parseInt((o.minuteMax - ((o.minuteMax - o.minuteMin) % o.stepMinute)) ,10),secMax=parseInt((o.secondMax - ((o.secondMax - o.secondMin) % o.stepSecond)) ,10),millisecMax=parseInt((o.millisecMax - ((o.millisecMax - o.millisecMin) % o.stepMillisec)) ,10),dp_id=this.inst.id.toString().replace(/([^A-Za-z0-9_])/g, '');if ($dp.find("div#ui-timepicker-div-"+ dp_id).length === 0 && o.showTimepicker){var noDisplay=' style="display:none;"',html ='<div class="ui-timepicker-div" id="ui-timepicker-div-' + dp_id + '"><dl>' +'<dt class="ui_tpicker_time_label" id="ui_tpicker_time_label_' + dp_id + '"' +((o.showTime) ? '' :noDisplay) + '>' + o.timeText + '</dt>' +'<dd class="ui_tpicker_time" id="ui_tpicker_time_' + dp_id + '"' +((o.showTime) ? '' :noDisplay) + '></dd>' +'<dt class="ui_tpicker_hour_label" id="ui_tpicker_hour_label_' + dp_id + '"' +((o.showHour) ? '' :noDisplay) + '>' + o.hourText + '</dt>',hourGridSize=0,minuteGridSize=0,secondGridSize=0,millisecGridSize=0,size; html += '<dd class="ui_tpicker_hour"><div id="ui_tpicker_hour_' + dp_id + '"' +((o.showHour) ? '' :noDisplay) + '></div>';if (o.showHour && o.hourGrid > 0){html += '<div style="padding-left:1px"><table class="ui-tpicker-grid-label"><tr>';for (var h=o.hourMin; h <= hourMax; h += parseInt(o.hourGrid,10)){hourGridSize++;var tmph=(o.ampm && h > 12) ? h-12 :h;if (tmph < 10) tmph='0' + tmph;if (o.ampm){if (h == 0) tmph=12 +'a';else if (h < 12) tmph += 'a';else tmph += 'p';}html += '<td>' + tmph + '</td>';}html += '</tr></table></div>';}html += '</dd>';html += '<dt class="ui_tpicker_minute_label" id="ui_tpicker_minute_label_' + dp_id + '"' +((o.showMinute) ? '' :noDisplay) + '>' + o.minuteText + '</dt>'+'<dd class="ui_tpicker_minute"><div id="ui_tpicker_minute_' + dp_id + '"' +((o.showMinute) ? '' :noDisplay) + '></div>';if (o.showMinute && o.minuteGrid > 0){html += '<div style="padding-left:1px"><table class="ui-tpicker-grid-label"><tr>';for (var m=o.minuteMin; m <= minMax; m += parseInt(o.minuteGrid,10)){minuteGridSize++;html += '<td>' + ((m < 10) ? '0' :'') + m + '</td>';}html += '</tr></table></div>';}html += '</dd>';html += '<dt class="ui_tpicker_second_label" id="ui_tpicker_second_label_' + dp_id + '"' +((o.showSecond) ? '' :noDisplay) + '>' + o.secondText + '</dt>'+'<dd class="ui_tpicker_second"><div id="ui_tpicker_second_' + dp_id + '"'+((o.showSecond) ? '' :noDisplay) + '></div>';if (o.showSecond && o.secondGrid > 0){html += '<div style="padding-left:1px"><table><tr>';for (var s=o.secondMin; s <= secMax; s += parseInt(o.secondGrid,10)){secondGridSize++;html += '<td>' + ((s < 10) ? '0' :'') + s + '</td>';}html += '</tr></table></div>';}html += '</dd>';html += '<dt class="ui_tpicker_millisec_label" id="ui_tpicker_millisec_label_' + dp_id + '"' +((o.showMillisec) ? '' :noDisplay) + '>' + o.millisecText + '</dt>'+'<dd class="ui_tpicker_millisec"><div id="ui_tpicker_millisec_' + dp_id + '"'+((o.showMillisec) ? '' :noDisplay) + '></div>';if (o.showMillisec && o.millisecGrid > 0){html += '<div style="padding-left:1px"><table><tr>';for (var l=o.millisecMin; l <= millisecMax; l += parseInt(o.millisecGrid,10)){millisecGridSize++;html += '<td>' + ((l < 10) ? '0' :'') + l + '</td>';}html += '</tr></table></div>';}html += '</dd>';html += '<dt class="ui_tpicker_timezone_label" id="ui_tpicker_timezone_label_' + dp_id + '"' +((o.showTimezone) ? '' :noDisplay) + '>' + o.timezoneText + '</dt>';html += '<dd class="ui_tpicker_timezone" id="ui_tpicker_timezone_' + dp_id + '"'+((o.showTimezone) ? '' :noDisplay) + '></dd>';html += '</dl></div>';$tp=$(html);if (o.timeOnly === true){$tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all">' +'<div class="ui-datepicker-title">' + o.timeOnlyTitle + '</div>' +'</div>');$dp.find('.ui-datepicker-header, .ui-datepicker-calendar').hide();}this.hour_slider=$tp.find('#ui_tpicker_hour_'+ dp_id).slider({orientation:"horizontal",value:this.hour,min:o.hourMin,max:hourMax,step:o.stepHour,slide:function(event, ui){tp_inst.hour_slider.slider("option", "value", ui.value);tp_inst._onTimeChange();}});this.minute_slider=$tp.find('#ui_tpicker_minute_'+ dp_id).slider({orientation:"horizontal",value:this.minute,min:o.minuteMin,max:minMax,step:o.stepMinute,slide:function(event, ui){tp_inst.minute_slider.slider("option", "value", ui.value);tp_inst._onTimeChange();}});this.second_slider=$tp.find('#ui_tpicker_second_'+ dp_id).slider({orientation:"horizontal",value:this.second,min:o.secondMin,max:secMax,step:o.stepSecond,slide:function(event, ui){tp_inst.second_slider.slider("option", "value", ui.value);tp_inst._onTimeChange();}});this.millisec_slider=$tp.find('#ui_tpicker_millisec_'+ dp_id).slider({orientation:"horizontal",value:this.millisec,min:o.millisecMin,max:millisecMax,step:o.stepMillisec,slide:function(event, ui){tp_inst.millisec_slider.slider("option", "value", ui.value);tp_inst._onTimeChange();}});this.timezone_select=$tp.find('#ui_tpicker_timezone_'+ dp_id).append('<select></select>').find("select");$.fn.append.apply(this.timezone_select,$.map(o.timezoneList, function(val, idx){return $("<option />").val(typeof val == "object" ? val.value :val).text(typeof val == "object" ? val.label :val);}));this.timezone_select.val((typeof this.timezone != "undefined" && this.timezone != null && this.timezone != "") ? this.timezone :o.timezone);this.timezone_select.change(function(){tp_inst._onTimeChange();});if (o.showHour && o.hourGrid > 0){size=100 * hourGridSize * o.hourGrid / (hourMax - o.hourMin);$tp.find(".ui_tpicker_hour table").css({width:size + "%",marginLeft:(size / (-2 * hourGridSize)) + "%",borderCollapse:'collapse'}).find("td").each(function(index){$(this).click(function(){var h=$(this).html();if(o.ampm){var ap=h.substring(2).toLowerCase(),aph=parseInt(h.substring(0,2), 10);if (ap == 'a'){if (aph == 12) h=0;else h=aph;} else if (aph == 12) h=12;else h=aph + 12;}tp_inst.hour_slider.slider("option", "value", h);tp_inst._onTimeChange();tp_inst._onSelectHandler();}).css({cursor:'pointer',width:(100 / hourGridSize) + '%',textAlign:'center',overflow:'hidden'});});}if (o.showMinute && o.minuteGrid > 0){size=100 * minuteGridSize * o.minuteGrid / (minMax - o.minuteMin);$tp.find(".ui_tpicker_minute table").css({width:size + "%",marginLeft:(size / (-2 * minuteGridSize)) + "%",borderCollapse:'collapse'}).find("td").each(function(index){$(this).click(function(){tp_inst.minute_slider.slider("option", "value", $(this).html());tp_inst._onTimeChange();tp_inst._onSelectHandler();}).css({cursor:'pointer',width:(100 / minuteGridSize) + '%',textAlign:'center',overflow:'hidden'});});}if (o.showSecond && o.secondGrid > 0){$tp.find(".ui_tpicker_second table").css({width:size + "%",marginLeft:(size / (-2 * secondGridSize)) + "%",borderCollapse:'collapse'}).find("td").each(function(index){$(this).click(function(){tp_inst.second_slider.slider("option", "value", $(this).html());tp_inst._onTimeChange();tp_inst._onSelectHandler();}).css({cursor:'pointer',width:(100 / secondGridSize) + '%',textAlign:'center',overflow:'hidden'});});}if (o.showMillisec && o.millisecGrid > 0){$tp.find(".ui_tpicker_millisec table").css({width:size + "%",marginLeft:(size / (-2 * millisecGridSize)) + "%",borderCollapse:'collapse'}).find("td").each(function(index){$(this).click(function(){tp_inst.millisec_slider.slider("option", "value", $(this).html());tp_inst._onTimeChange();tp_inst._onSelectHandler();}).css({cursor:'pointer',width:(100 / millisecGridSize) + '%',textAlign:'center',overflow:'hidden'});});}var $buttonPanel=$dp.find('.ui-datepicker-buttonpane');if ($buttonPanel.length) $buttonPanel.before($tp);else $dp.append($tp);this.$timeObj=$tp.find('#ui_tpicker_time_'+ dp_id);if (this.inst !== null){var timeDefined=this.timeDefined;this._onTimeChange();this.timeDefined=timeDefined;}var onSelectDelegate=function(){tp_inst._onSelectHandler();};this.hour_slider.bind('slidestop',onSelectDelegate);this.minute_slider.bind('slidestop',onSelectDelegate);this.second_slider.bind('slidestop',onSelectDelegate);this.millisec_slider.bind('slidestop',onSelectDelegate);if (this._defaults.addSliderAccess){var sliderAccessArgs=this._defaults.sliderAccessArgs;setTimeout(function(){ if($tp.find('.ui-slider-access').length == 0){$tp.find('.ui-slider:visible').sliderAccess(sliderAccessArgs);var sliderAccessWidth=$tp.find('.ui-slider-access:eq(0)').outerWidth(true);if(sliderAccessWidth){$tp.find('table:visible').each(function(){var $g=$(this),oldWidth=$g.outerWidth(),oldMarginLeft=$g.css('marginLeft').toString().replace('%',''),newWidth=oldWidth - sliderAccessWidth,newMarginLeft=((oldMarginLeft * newWidth)/oldWidth) + '%';$g.css({ width:newWidth, marginLeft:newMarginLeft });});}}},0);}}},_limitMinMaxDateTime:function(dp_inst, adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear, dp_inst.selectedMonth, dp_inst.selectedDay);if(!this._defaults.showTimepicker) return; if($.datepicker._get(dp_inst, 'minDateTime') !== null && $.datepicker._get(dp_inst, 'minDateTime') !== undefined && dp_date){var minDateTime=$.datepicker._get(dp_inst, 'minDateTime'),minDateTimeDate=new Date(minDateTime.getFullYear(), minDateTime.getMonth(), minDateTime.getDate(), 0, 0, 0, 0);if(this.hourMinOriginal === null || this.minuteMinOriginal === null || this.secondMinOriginal === null || this.millisecMinOriginal === null){this.hourMinOriginal=o.hourMin;this.minuteMinOriginal=o.minuteMin;this.secondMinOriginal=o.secondMin;this.millisecMinOriginal=o.millisecMin;}if(dp_inst.settings.timeOnly || minDateTimeDate.getTime() == dp_date.getTime()){this._defaults.hourMin=minDateTime.getHours();if (this.hour <= this._defaults.hourMin){this.hour=this._defaults.hourMin;this._defaults.minuteMin=minDateTime.getMinutes();if (this.minute <= this._defaults.minuteMin){this.minute=this._defaults.minuteMin;this._defaults.secondMin=minDateTime.getSeconds();} else if (this.second <= this._defaults.secondMin){this.second=this._defaults.secondMin;this._defaults.millisecMin=minDateTime.getMilliseconds();} else {if(this.millisec < this._defaults.millisecMin)this.millisec=this._defaults.millisecMin;this._defaults.millisecMin=this.millisecMinOriginal;}} else {this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;}}else{this._defaults.hourMin=this.hourMinOriginal;this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;}}if($.datepicker._get(dp_inst, 'maxDateTime') !== null && $.datepicker._get(dp_inst, 'maxDateTime') !== undefined && dp_date){var maxDateTime=$.datepicker._get(dp_inst, 'maxDateTime'),maxDateTimeDate=new Date(maxDateTime.getFullYear(), maxDateTime.getMonth(), maxDateTime.getDate(), 0, 0, 0, 0);if(this.hourMaxOriginal === null || this.minuteMaxOriginal === null || this.secondMaxOriginal === null){this.hourMaxOriginal=o.hourMax;this.minuteMaxOriginal=o.minuteMax;this.secondMaxOriginal=o.secondMax;this.millisecMaxOriginal=o.millisecMax;}if(dp_inst.settings.timeOnly || maxDateTimeDate.getTime() == dp_date.getTime()){this._defaults.hourMax=maxDateTime.getHours();if (this.hour >= this._defaults.hourMax){this.hour=this._defaults.hourMax;this._defaults.minuteMax=maxDateTime.getMinutes();if (this.minute >= this._defaults.minuteMax){this.minute=this._defaults.minuteMax;this._defaults.secondMax=maxDateTime.getSeconds();} else if (this.second >= this._defaults.secondMax){this.second=this._defaults.secondMax;this._defaults.millisecMax=maxDateTime.getMilliseconds();} else {if(this.millisec > this._defaults.millisecMax) this.millisec=this._defaults.millisecMax;this._defaults.millisecMax=this.millisecMaxOriginal;}} else {this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;}}else{this._defaults.hourMax=this.hourMaxOriginal;this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;}}if(adjustSliders !== undefined && adjustSliders === true){var hourMax=parseInt((this._defaults.hourMax - ((this._defaults.hourMax - this._defaults.hourMin) % this._defaults.stepHour)) ,10), minMax=parseInt((this._defaults.minuteMax - ((this._defaults.minuteMax - this._defaults.minuteMin) % this._defaults.stepMinute)) ,10), secMax=parseInt((this._defaults.secondMax - ((this._defaults.secondMax - this._defaults.secondMin) % this._defaults.stepSecond)) ,10),millisecMax=parseInt((this._defaults.millisecMax - ((this._defaults.millisecMax - this._defaults.millisecMin) % this._defaults.stepMillisec)) ,10);if(this.hour_slider)this.hour_slider.slider("option", { min:this._defaults.hourMin, max:hourMax }).slider('value', this.hour);if(this.minute_slider)this.minute_slider.slider("option", { min:this._defaults.minuteMin, max:minMax }).slider('value', this.minute);if(this.second_slider)this.second_slider.slider("option", { min:this._defaults.secondMin, max:secMax }).slider('value', this.second);if(this.millisec_slider)this.millisec_slider.slider("option", { min:this._defaults.millisecMin, max:millisecMax }).slider('value', this.millisec);}},_onTimeChange:function(){var hour=(this.hour_slider) ? this.hour_slider.slider('value') :false,minute=(this.minute_slider) ? this.minute_slider.slider('value') :false,second=(this.second_slider) ? this.second_slider.slider('value') :false,millisec=(this.millisec_slider) ? this.millisec_slider.slider('value') :false,timezone=(this.timezone_select) ? this.timezone_select.val() :false,o=this._defaults;if (typeof(hour) == 'object') hour=false;if (typeof(minute) == 'object') minute=false;if (typeof(second) == 'object') second=false;if (typeof(millisec) == 'object') millisec=false;if (typeof(timezone) == 'object') timezone=false;if (hour !== false) hour=parseInt(hour,10);if (minute !== false) minute=parseInt(minute,10);if (second !== false) second=parseInt(second,10);if (millisec !== false) millisec=parseInt(millisec,10);var ampm=o[hour < 12 ? 'amNames' :'pmNames'][0];var hasChanged=(hour != this.hour || minute != this.minute|| second != this.second || millisec != this.millisec|| (this.ampm.length > 0 && (hour < 12) != ($.inArray(this.ampm.toUpperCase(), this.amNames) !== -1))|| timezone != this.timezone);if (hasChanged){if (hour !== false)this.hour=hour;if (minute !== false) this.minute=minute;if (second !== false) this.second=second;if (millisec !== false) this.millisec=millisec;if (timezone !== false) this.timezone=timezone;if (!this.inst) this.inst=$.datepicker._getInst(this.$input[0]);this._limitMinMaxDateTime(this.inst, true);}if (o.ampm) this.ampm=ampm;this.formattedTime=$.datepicker.formatTime(this._defaults.timeFormat, this, this._defaults);if (this.$timeObj) this.$timeObj.text(this.formattedTime + o.timeSuffix);this.timeDefined=true;if (hasChanged) this._updateDateTime();}, _onSelectHandler:function(){var onSelect=this._defaults.onSelect;var inputEl=this.$input ? this.$input[0] :null;if (onSelect && inputEl){onSelect.apply(inputEl, [this.formattedDateTime, this]);}},_formatTime:function(time, format){time=time || { hour:this.hour, minute:this.minute, second:this.second, millisec:this.millisec, ampm:this.ampm, timezone:this.timezone };var tmptime=(format || this._defaults.timeFormat).toString();tmptime=$.datepicker.formatTime(tmptime, time, this._defaults);if (arguments.length) return tmptime;else this.formattedTime=tmptime;},_updateDateTime:function(dp_inst){dp_inst=this.inst || dp_inst;var dt=$.datepicker._daylightSavingAdjust(new Date(dp_inst.selectedYear, dp_inst.selectedMonth, dp_inst.selectedDay)),dateFmt=$.datepicker._get(dp_inst, 'dateFormat'),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=dt !== null && this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt, (dt === null ? new Date() :dt), formatCfg);var formattedDateTime=this.formattedDate;if (dp_inst.lastVal !== undefined && (dp_inst.lastVal.length > 0 && this.$input.val().length === 0))return;if (this._defaults.timeOnly === true){formattedDateTime=this.formattedTime;} else if (this._defaults.timeOnly !== true && (this._defaults.alwaysSetTime || timeAvailable)){formattedDateTime += this._defaults.separator + this.formattedTime + this._defaults.timeSuffix;}this.formattedDateTime=formattedDateTime;if(!this._defaults.showTimepicker){this.$input.val(this.formattedDate);} else if (this.$altInput && this._defaults.altFieldTimeOnly === true){this.$altInput.val(this.formattedTime);this.$input.val(this.formattedDate);} else if(this.$altInput){this.$altInput.val(formattedDateTime);this.$input.val(formattedDateTime);} else {this.$input.val(formattedDateTime);}this.$input.trigger("change");}});$.fn.extend({timepicker:function(o){o=o || {};var tmp_args=arguments;if (typeof o == 'object') tmp_args[0]=$.extend(o, { timeOnly:true });return $(this).each(function(){$.fn.datetimepicker.apply($(this), tmp_args);});},datetimepicker:function(o){o=o || {};var $input=this,tmp_args=arguments;if (typeof(o) == 'string'){if(o == 'getDate'){return $.fn.datepicker.apply($(this[0]), tmp_args);}else {return this.each(function(){var $t=$(this);$t.datepicker.apply($t, tmp_args);});}}else{return this.each(function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t, o)._defaults);});}}});$.datepicker.formatTime=function(format, time, options){options=options || {};options=$.extend($.timepicker._defaults, options);time=$.extend({hour:0, minute:0, second:0, millisec:0, timezone:'+0000'}, time);var tmptime=format;var ampmName=options['amNames'][0];var hour=parseInt(time.hour, 10);if (options.ampm){if (hour > 11){ampmName=options['pmNames'][0];if(hour > 12)hour=hour % 12;}if (hour === 0)hour=12;};tmptime=tmptime.replace(/(?:hh?|mm?|ss?|[tT]{1,2}|[lz])/g, function(match){switch (match.toLowerCase()){case 'hh':return ('0' + hour).slice(-2);case 'h':return hour;case 'mm':return ('0' + time.minute).slice(-2);case 'm':return time.minute;case 'ss':return ('0' + time.second).slice(-2);case 's':return time.second;case 'l':return ('00' + time.millisec).slice(-3);case 'z':return time.timezone;case 't':case 'tt':if (options.ampm){if (match.length == 1)ampmName=ampmName.charAt(0);return match.charAt(0) == 'T' ? ampmName.toUpperCase() :ampmName.toLowerCase();}return '';}});tmptime=$.trim(tmptime);return tmptime;};$.datepicker._base_selectDate=$.datepicker._selectDate;$.datepicker._selectDate=function (id, dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst, 'timepicker');if (tp_inst){tp_inst._limitMinMaxDateTime(inst, true);inst.inline=inst.stay_open=true;this._base_selectDate(id, dateStr);inst.inline=inst.stay_open=false;this._notifyChange(inst);this._updateDatepicker(inst);}else this._base_selectDate(id, dateStr);};$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker;$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if($.datepicker._curInst && $.datepicker._curInst != inst && $.datepicker._datepickerShowing && $.datepicker._lastInput != input){return;}if (typeof(inst.stay_open) !== 'boolean' || inst.stay_open === false){this._base_updateDatepicker(inst);var tp_inst=this._get(inst, 'timepicker');if(tp_inst) tp_inst._addTimePicker(inst);}};$.datepicker._base_doKeyPress=$.datepicker._doKeyPress;$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst, 'timepicker');if (tp_inst){if ($.datepicker._get(inst, 'constrainInput')){var ampm=tp_inst._defaults.ampm,dateChars=$.datepicker._possibleChars($.datepicker._get(inst, 'dateFormat')),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g, '').replace(/TT/g, ampm ? 'APM' :'').replace(/Tt/g, ampm ? 'AaPpMm' :'').replace(/tT/g, ampm ? 'AaPpMm' :'').replace(/T/g, ampm ? 'AP' :'').replace(/tt/g, ampm ? 'apm' :'').replace(/t/g, ampm ? 'ap' :'') +" " +tp_inst._defaults.separator +tp_inst._defaults.timeSuffix +(tp_inst._defaults.showTimezone ? tp_inst._defaults.timezoneList.join('') :'') +(tp_inst._defaults.amNames.join('')) +(tp_inst._defaults.pmNames.join('')) +dateChars,chr=String.fromCharCode(event.charCode === undefined ? event.keyCode :event.charCode);return event.ctrlKey || (chr < ' ' || !dateChars || datetimeChars.indexOf(chr) > -1);}}return $.datepicker._base_doKeyPress(event);};$.datepicker._base_doKeyUp=$.datepicker._doKeyUp;$.datepicker._doKeyUp=function (event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst, 'timepicker');if (tp_inst){if (tp_inst._defaults.timeOnly && (inst.input.val() != inst.lastVal)){try {$.datepicker._updateDatepicker(inst);}catch (err){$.datepicker.log(err);}}}return $.datepicker._base_doKeyUp(event);};$.datepicker._base_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]),$dp=inst.dpDiv;this._base_gotoToday(id);var now=new Date();var tp_inst=this._get(inst, 'timepicker');if (tp_inst && tp_inst._defaults.showTimezone && tp_inst.timezone_select){var tzoffset=now.getTimezoneOffset(); var tzsign=tzoffset > 0 ? '-' :'+';tzoffset=Math.abs(tzoffset);var tzmin=tzoffset % 60;tzoffset=tzsign + ('0' + (tzoffset - tzmin) / 60).slice(-2) + ('0' + tzmin).slice(-2);if (tp_inst._defaults.timezoneIso8609)tzoffset=tzoffset.substring(0, 3) + ':' + tzoffset.substring(3);tp_inst.timezone_select.val(tzoffset);}this._setTime(inst, now);$('.ui-datepicker-today', $dp).click(); };$.datepicker._disableTimepickerDatepicker=function(target, date, withDate){var inst=this._getInst(target),tp_inst=this._get(inst, 'timepicker');$(target).datepicker('getDate'); if (tp_inst){tp_inst._defaults.showTimepicker=false;tp_inst._updateDateTime(inst);}};$.datepicker._enableTimepickerDatepicker=function(target, date, withDate){var inst=this._getInst(target),tp_inst=this._get(inst, 'timepicker');$(target).datepicker('getDate'); if (tp_inst){tp_inst._defaults.showTimepicker=true;tp_inst._addTimePicker(inst); tp_inst._updateDateTime(inst);}};$.datepicker._setTime=function(inst, date){var tp_inst=this._get(inst, 'timepicker');if (tp_inst){var defaults=tp_inst._defaults,hour=date ? date.getHours() :defaults.hour,minute=date ? date.getMinutes() :defaults.minute,second=date ? date.getSeconds() :defaults.second,millisec=date ? date.getMilliseconds() :defaults.millisec;if ((hour < defaults.hourMin || hour > defaults.hourMax) || (minute < defaults.minuteMin || minute > defaults.minuteMax) || (second < defaults.secondMin || second > defaults.secondMax) || (millisec < defaults.millisecMin || millisec > defaults.millisecMax)){hour=defaults.hourMin;minute=defaults.minuteMin;second=defaults.secondMin;millisec=defaults.millisecMin;}tp_inst.hour=hour;tp_inst.minute=minute;tp_inst.second=second;tp_inst.millisec=millisec;if (tp_inst.hour_slider) tp_inst.hour_slider.slider('value', hour);if (tp_inst.minute_slider) tp_inst.minute_slider.slider('value', minute);if (tp_inst.second_slider) tp_inst.second_slider.slider('value', second);if (tp_inst.millisec_slider) tp_inst.millisec_slider.slider('value', millisec);tp_inst._onTimeChange();tp_inst._updateDateTime(inst);}};$.datepicker._setTimeDatepicker=function(target, date, withDate){var inst=this._getInst(target),tp_inst=this._get(inst, 'timepicker');if (tp_inst){this._setDateFromField(inst);var tp_date;if (date){if (typeof date == "string"){tp_inst._parseTime(date, withDate);tp_date=new Date();tp_date.setHours(tp_inst.hour, tp_inst.minute, tp_inst.second, tp_inst.millisec);}else tp_date=new Date(date.getTime());if (tp_date.toString() == 'Invalid Date') tp_date=undefined;this._setTime(inst, tp_date);}}};$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker;$.datepicker._setDateDatepicker=function(target, date){var inst=this._getInst(target),tp_date=(date instanceof Date) ? new Date(date.getTime()) :date;this._updateDatepicker(inst);this._base_setDateDatepicker.apply(this, arguments);this._setTimeDatepicker(target, tp_date, true);};$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker;$.datepicker._getDateDatepicker=function(target, noDefault){var inst=this._getInst(target),tp_inst=this._get(inst, 'timepicker');if (tp_inst){this._setDateFromField(inst, noDefault);var date=this._getDate(inst);if (date && tp_inst._parseTime($(target).val(), tp_inst.timeOnly)) date.setHours(tp_inst.hour, tp_inst.minute, tp_inst.second, tp_inst.millisec);return date;}return this._base_getDateDatepicker(target, noDefault);};$.datepicker._base_parseDate=$.datepicker.parseDate;$.datepicker.parseDate=function(format, value, settings){var date;try {date=this._base_parseDate(format, value, settings);} catch (err){if (err.indexOf(":") >= 0){date=this._base_parseDate(format, value.substring(0,value.length-(err.length-err.indexOf(':')-2)), settings);} else {throw err;}}return date;};$.datepicker._base_formatDate=$.datepicker._formatDate;$.datepicker._formatDate=function(inst, day, month, year){var tp_inst=this._get(inst, 'timepicker');if(tp_inst){if(day)var b=this._base_formatDate(inst, day, month, year);tp_inst._updateDateTime(inst);return tp_inst.$input.val();}return this._base_formatDate(inst);};$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker;$.datepicker._optionDatepicker=function(target, name, value){var inst=this._getInst(target),tp_inst=this._get(inst, 'timepicker');if (tp_inst){var min,max,onselect;if (typeof name == 'string'){ if (name==='minDate' || name==='minDateTime')min=value;else if (name==='maxDate' || name==='maxDateTime')max=value;else if (name==='onSelect')onselect=value;} else if (typeof name == 'object'){ if(name.minDate)min=name.minDate;else if (name.minDateTime)min=name.minDateTime;else if (name.maxDate)max=name.maxDate;else if (name.maxDateTime)max=name.maxDateTime;}if(min){ if(min==0)min=new Date();elsemin= new Date(min);tp_inst._defaults.minDate=min;tp_inst._defaults.minDateTime=min;} else if (max){ if(max==0)max=new Date();elsemax= new Date(max);tp_inst._defaults.maxDate=max;tp_inst._defaults.maxDateTime=max;}else if (onselect)tp_inst._defaults.onSelect=onselect;}if (value === undefined)return this._base_optionDatepicker(target, name);return this._base_optionDatepicker(target, name, value);};function extendRemove(target, props){$.extend(target, props);for (var name in props)if (props[name] === null || props[name] === undefined)target[name]=props[name];return target;};$.timepicker=new Timepicker(); $.timepicker.version="0.9.9";})(jQuery);
